
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Main.cshtml";
}





@*<div class="box box-primary">
        <div class="box-body box-profile">
            <img class="profile-user-img img-responsive img-circle" src="~/adminlte/dist/img/user4-128x128.jpg" alt="User profile picture">

            <h3 class="profile-username text-center">Doctor Mariem</h3>

            <p class="text-muted text-center">Software Engineer</p>

            <ul class="list-group list-group-unbordered">
                <li class="list-group-item">
                    <b>Followers</b> <a class="pull-right">1,322</a>
                </li>
                <li class="list-group-item">
                    <b>Following</b> <a class="pull-right">543</a>
                </li>
                <li class="list-group-item">
                    <b>Friends</b> <a class="pull-right">13,287</a>
                </li>
            </ul>

            <a href="#" class="btn btn-primary btn-block"><b>Follow</b></a>
        </div>é

    </div>*@

<div class="box box-primary">

    <div class="box-header with-border">
        <h3 class="box-title">Chat</h3>
    </div>
    <!-- /.box-header -->
    <div class="box box-primary direct-chat direct-chat-primary">
        <div id="messageDiv" class="box-body">
        </div>
    </div>
    <div class="box-body">

        <div class="form-group margin-bottom-none">
            <div class="col-sm-9">
                <input id="messageInput" type="text" class="form-control input-sm" />
            </div>
            <div class="col-sm-3">
                <button id="chatButton" class="btn btn-danger pull-right btn-block btn-sm">send</button>
            </div>
        </div>

    </div>
</div>



@section scripts
{
    @Scripts.Render("~/bundles/signalr")

    <script src="/signalr/hubs"></script>
    <script>
            $(function () {

                $.connection.hub.start();

                const chat = $.connection.chat;

                chat.client.reseiveMessage = (msg) => {
                    $('#messageDiv').append(msg + '<br/>')
                }

                $('#chatButton').click(() => {
                    chat.server.sendMessage($('#messageInput').val())
                })


            })

    </script>

}







